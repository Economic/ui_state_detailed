---
title: "UI Claims by Industry: latest weekly"
date: "April 15, 2020"
output:
  html_document:
    theme: flatly
---

```{r setup, include=FALSE}
library(knitr)
library(DT)
library(tidyverse)
library(lubridate)
library(scales)
opts_chunk$set(echo = FALSE)
```

```{r include=FALSE}
state_ui_industry_recoded <- read_csv("../output/state_ui_industry_recoded.csv") %>% 
  transmute(
    State = stateabb,
    `Week ending` = paste(month(endweek), day(endweek), sep = "-"),
    `Sector name` = sectorname,
    NAICS = sector,
    `Initial claims (IC)` = number(ic, accuracy = 1.0, big.mark = ","),
    `Employment (2019q3)` =  number(emp, accuracy = 1.0, big.mark = ","),
    `IC share of emp` = percent(ic_share_emp, accuracy = 0.1),
    `IC share of state IC` = percent(ic_share_sumic, accuracy = 0.1),
    `Headline state IC` = number(ic_headline, accuracy = 1.0, big.mark = ",")
  ) %>% 
  arrange(State, `Week ending`, NAICS)

state_ui_industry_original <- read_csv("../output/state_ui_industry_original.csv") %>% 
  transmute(
    State = stateabb,
    `Week ending` = paste(month(endweek), day(endweek), sep = "-"),
    `Sector name` = sectorname,
    NAICS = sector,
    `Initial claims (IC)` = number(ic, accuracy = 1.0, big.mark = ",")
  ) %>% 
  arrange(State, `Week ending`, NAICS)
```

## What's available

Industry-specific initial UI claims at, mostly, the 2-digit NAICS level.

These are from state employment offices for most states and for Michigan, the Upjohn Institute, which collected data from that state's employment office.

## Original data
```{r}
datatable(
  state_ui_industry_original,
  rownames = FALSE,
  extensions = 'Buttons',
  options = list(
    dom = 'Brt',
    buttons = list(list(extend = 'csv', filename= 'state_ui_industry_original')),
    columnDefs = list(
      list(className = 'dt-right', targets = 0:4)
    ),
    scrollY = "400px",
    scrollCollapse = TRUE,
    paging = FALSE
  )
)
```

## Adjusted data, removing unclassified sectors, scaling IC totals to match state-reported totals
```{r}
datatable(
  state_ui_industry_recoded,
  rownames = FALSE,
  extensions = 'Buttons',
  options = list(
    dom = 'Brt',
    buttons = list(list(extend = 'csv', filename= 'state_ui_industry_recoded')),
    columnDefs = list(
      list(className = 'dt-right', targets = 0:8)
    ),
    scrollY = "400px",
    scrollCollapse = TRUE,
    paging = FALSE
  )
)
```

## Sources

TK: links to each state's data sources.

See the Github [repo](https://github.com/Economic/ui_state_detailed) for the code.

## Contributors
Jori Kandra, Andrew Van Dam, Ben Zipperer
